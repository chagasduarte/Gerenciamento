<div class="container mt-4 position-relative">

  <!-- ONBOARDING OVERLAY -->
  <div *ngIf="showOnboarding" class="onboarding-overlay">
    <div class="onboarding-content">
      <h1>Bem-vindo ao Fidelis!</h1>
      <p>Vamos configurar suas finanças iniciais para começar com o pé direito.</p>
      <ul>
        <li>Defina suas <strong>Entradas Fixas</strong> (Salário, Vale...)</li>
        <li>Revise suas <strong>Saídas Fixas</strong> (Contas, Mercado...)</li>
        <li>Informe os valores médios e o dia de que planeja efetivar o pagamento.</li>
        Essas informações serão usadas para gerar as transações recorrentes e assim criar um planejamento inicial.

      </ul>
      <button class="btn btn-success btn-lg mt-3" (click)="closeOnboarding()">
        Começar Agora
      </button>
    </div>
  </div>

  <ul class="nav nav-tabs">
    <li class="nav-item">
      <a class="nav-link" [class.active]="tab === 'entrada'" (click)="tab = 'entrada'">
        Entradas Fixas
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" [class.active]="tab === 'saida'" (click)="tab = 'saida'">
        Saídas Fixas
      </a>
    </li>
  </ul>

  <!-- ENTRADAS -->
  <div *ngIf="tab === 'entrada'" class="mt-3 fade-in">
    <p class="text-secondary mb-3">
      Adicione aqui suas fontes de renda fixas.
    </p>

    <div *ngFor="let ent of entradas; let i = index" class="card p-3 mb-2">
      <div class="d-flex flex-wrap gap-2 align-items-center">
        <div class="flex-grow-1">
          <label class="d-block d-md-none text-muted small">Descrição</label>
          <input class="form-control" placeholder="Descrição" [(ngModel)]="ent.description">
        </div>

        <div class="d-flex gap-2 w-mobile-100">
          <div class="flex-grow-1">
            <label class="d-block d-md-none text-muted small">Valor</label>
            <input class="form-control" type="number" placeholder="Valor (R$)" [(ngModel)]="ent.value">
          </div>

          <div style="width: 80px;">
            <label class="d-block d-md-none text-muted small">Dia</label>
            <input class="form-control text-center" type="number" min="1" max="31" placeholder="Dia"
              [(ngModel)]="ent.day_of_month">
          </div>
        </div>

        <button class="btn btn-danger" (click)="removeEntrada(i)">
          <span class="d-none d-md-inline">X</span>
          <span class="d-inline d-md-none">Remover</span>
        </button>
      </div>
    </div>

    <button class="btn btn-primary mt-2" (click)="addEntrada()">+ Adicionar Nova Entrada</button>
  </div>

  <!-- SAIDAS -->
  <div *ngIf="tab === 'saida'" class="mt-3 fade-in">

    <label class="mb-2">Adicionar despesa extra da lista:</label>
    <div class="d-flex gap-2 mb-3">
      <select class="form-control w-50" (change)="addSaidaPadrao($event)">
        <option value="">Selecione para adicionar...</option>
        <option value="Aluguel">Aluguel</option>
        <option value="Água">Água</option>
        <option value="Energia">Energia</option>
        <option value="Internet">Internet</option>
        <option value="Comida">Comida</option>
        <option value="Carro">Carro</option>
        <option value="Lazer">Lazer</option>
      </select>
    </div>

    <p class="text-secondary mb-3">
      Liste aqui suas despesas recorrentes mensais.
    </p>

    <div *ngFor="let sai of saidas; let i = index" class="card p-3 mb-2">
      <div class="d-flex flex-wrap gap-2 align-items-center">
        <div class="flex-grow-1">
          <label class="d-block d-md-none text-muted small">Descrição</label>
          <input class="form-control" placeholder="Descrição" [(ngModel)]="sai.description">
        </div>

        <div class="d-flex gap-2 w-mobile-100">
          <div class="flex-grow-1">
            <label class="d-block d-md-none text-muted small">Valor</label>
            <input class="form-control" type="number" placeholder="Valor Estimado" [(ngModel)]="sai.value">
          </div>

          <div style="width: 80px;">
            <label class="d-block d-md-none text-muted small">Venc.</label>
            <input class="form-control text-center" type="number" min="1" max="31" placeholder="Dia"
              [(ngModel)]="sai.day_of_month">
          </div>
        </div>

        <button class="btn btn-danger" (click)="removeSaida(i)">
          <span class="d-none d-md-inline">X</span>
          <span class="d-inline d-md-none">Remover</span>
        </button>
      </div>
    </div>

    <button class="btn btn-secondary mt-2" (click)="addSaidaCustom()">+ Adicionar Despesa Personalizada</button>
  </div>

  <!-- BOTÃO SALVAR -->
  <div class="mt-5 text-end border-top pt-3">
    <button class="btn btn-success btn-lg" [disabled]="entradas.length === 0 || saidas.length === 0" (click)="salvar()">
      Salvar Configurações
    </button>
  </div>

</div>
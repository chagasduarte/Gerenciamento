<div class="pagina">

  <header class="topo">
    <h1>Objetivos</h1>
    <button class="btn-novo">
      <i class="bi bi-plus-lg"></i> Novo objetivo
    </button>
  </header>

  <app-resumo-objetivos [objetivos]="objetivos">
  </app-resumo-objetivos>

  <app-filtros-objetivos (filtroChange)="mudarFiltro($event)">
  </app-filtros-objetivos>

  <section class="lista">
    <app-card-objetivos *ngFor="let obj of objetivosFiltrados" [objetivo]="obj">
    </app-card-objetivos>
  </section>

  <!-- Timeline / Gantt Chart -->
  <div class="grid-temporal sombra" *ngIf="ano$ | async as ano">
    <!-- Header Row (Months) -->
    <div class="grid-doze">
      <div class="temp-meses" *ngFor="let mes of ano.meses; let i = index">
        {{mes.nomeAbrev}}
      </div>
    </div>

    <!-- Data Rows (Expenses/Objectives) -->
    <div class="grid-doze" *ngFor="let despesa of despesas">
      <div class="despesa" [ngClass]="{'objetivo-timeline': despesa.descricao.includes('ðŸŽ¯')}"
        [ngStyle]="{'grid-column': calculaInicioFim(despesa.data_inicio, despesa.data_fim)}"
        [title]="despesa.descricao">
        {{despesa.descricao.replace('- Parcela', '')}}
      </div>
    </div>
  </div>

</div>